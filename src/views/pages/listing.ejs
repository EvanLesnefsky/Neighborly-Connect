<%- include ('../partials/head') %>
  <%- include ('../partials/menu') %>
    <%- include ('../partials/message') %>
      <div class="container mt-4">
        <div class="row justify-content-center" style="top: 0;">
          <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel"
            style="width: 400px; height: 400px;">
            <div class="carousel-indicators">
              <% data.photos.forEach((photo, index)=> { %>
                <button type="button" data-bs-target="#carouselExampleControls" data-bs-slide-to="<%= index %>" <%
                  if(index===0) { %>class="active"<% } %> aria-current="true" aria-label="Slide <%= index + 1 %>
                      "></button>
                <% }); %>
            </div>
            <div class="carousel-inner">
              <% data.photos.forEach((photo, index)=> { %>
                <div class="carousel-item <% if(index === 0) { %>active<% } %>">
                  <img src="<%= photo.href %>" class="d-block w-100 h-100" alt="Slide <%= index + 1 %>">
                </div>
                <% }); %>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"
              data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"
              data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>

      <div class="d-flex align-items-center mt-4" style="top: 0;">
        <div class="container">
          <div class="row justify-content-center" style="top: 0;">
            <div class="col-8">
              <div class="row">
                <div class="col-6">
                  <h1 style="white-space: nowrap;">
                    <%= data.address.line %>, <%= data.address.city %>, <%= data.address.state_code %>
                  </h1>
                </div>
                <div class="col-6 text-end">
                  <h1>Price: <%-data.price%></h1>
                </div>
              </div>
              <hr class="my-4">
            </div>
          </div>

          <div class="row justify-content-center">
            <div class="col-8 text-start">
              <h1>Description</h1>
              <div class="card" id="description-card">
                <div class="card-body">
                  <p><%-data.description%></p>
                </div>
              </div>
              <hr class="my-4">
            </div>
          </div>

          <div class="row justify-content-center">
            <div class="col-8 text-start">
              <h1>Features</h1>
              <div class="card" id="features-card">
                <div class="card-body">
                  <ul>
                    <li><a><%-data.prop_type%></a></li>
                    <li><a>Year Built: <%-data.year_built%></a></li>
                    <li><a>Size: <%-data.sqft%> sqft</a></li>
                    <% data.features.forEach(feature=> { %>
                      <li><a><%-feature.text%></a></li>
                      <% }); %>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <script>
            const featuresCard = document.querySelector("#features-card");
            const descriptionCard = document.querySelector("#description-card");

            function setCardHeight() {
              descriptionCard.style.height = featuresCard.offsetHeight + "px";
            }
            setCardHeight();
            window.addEventListener("resize", setCardHeight);
          </script>
        </div>
      </div>
      <div class="row justify-content-center" style="margin-bottom: 50px;">
        <div class="col-8">
          <%- include ('../partials/footer') %>
        </div>
      </div>